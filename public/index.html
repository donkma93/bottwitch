<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Giveaway System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Language Selection Screen -->
    <div id="languageScreen" class="language-screen">
        <div class="language-content">
            <h1 data-i18n="title">üéÅ Twitch Giveaway System</h1>
            <p class="subtitle" data-i18n="subtitle">H·ªá th·ªëng qu·∫£n l√Ω giveaway v·ªõi bot t·ª± ƒë·ªông</p>
            
            <div class="language-selector">
                <h2>Ch·ªçn ng√¥n ng·ªØ / Select Language / Selecionar Idioma / Seleccionar Idioma</h2>
                <div class="language-buttons">
                    <button class="lang-btn" data-lang="vi" onclick="setLanguage('vi')">
                        <span class="flag">üáªüá≥</span>
                        <span>Ti·∫øng Vi·ªát</span>
                    </button>
                    <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">
                        <span class="flag">üá∫üá∏</span>
                        <span>English</span>
                    </button>
                    <button class="lang-btn" data-lang="pt" onclick="setLanguage('pt')">
                        <span class="flag">üáµüáπ</span>
                        <span>Portugu√™s</span>
                    </button>
                    <button class="lang-btn" data-lang="es" onclick="setLanguage('es')">
                        <span class="flag">üá™üá∏</span>
                        <span>Espa√±ol</span>
                    </button>
                </div>
            </div>
            
            <div class="channel-input-section">
                <div class="input-group">
                    <label for="channelInputInitial" data-i18n="channelInputLabel">T√™n k√™nh Twitch:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="channelInputInitial" 
                            data-i18n="channelInputPlaceholder"
                            placeholder="Nh·∫≠p t√™n k√™nh (v√≠ d·ª•: xqcow, pokimane)"
                            autocomplete="off"
                        >
                        <button id="connectInitialBtn" class="btn btn-primary" data-i18n="connectBtn">K·∫øt n·ªëi</button>
                    </div>
                </div>
                <div id="statusInitial" class="status-message"></div>
            </div>
        </div>
    </div>

    <!-- Main Application (hidden until connected) -->
    <div id="mainApp" class="container" style="display: none;">
        <header>
            <div class="header-top">
                <div>
                    <h1 data-i18n="title">üéÅ Twitch Giveaway System</h1>
                    <p class="subtitle" data-i18n="subtitle">H·ªá th·ªëng qu·∫£n l√Ω giveaway v·ªõi bot t·ª± ƒë·ªông</p>
                </div>
                <div class="language-switcher">
                    <select id="languageSelect" class="language-select">
                        <option value="vi">üáªüá≥ Ti·∫øng Vi·ªát</option>
                        <option value="en">üá∫üá∏ English</option>
                        <option value="pt">üáµüáπ Portugu√™s</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                    </select>
                </div>
            </div>
        </header>

        <div class="control-panel">
            <div class="input-group">
                <label for="channelInput" data-i18n="channelInputLabel">T√™n k√™nh Twitch:</label>
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="channelInput" 
                        data-i18n="channelInputPlaceholder"
                        placeholder="Nh·∫≠p t√™n k√™nh (v√≠ d·ª•: xqcow, pokimane)"
                        autocomplete="off"
                    >
                    <button id="connectBtn" class="btn btn-primary" data-i18n="connectBtn">K·∫øt n·ªëi</button>
                    <button id="disconnectBtn" class="btn btn-secondary" data-i18n="disconnectBtn" disabled>Ng·∫Øt k·∫øt n·ªëi</button>
                </div>
            </div>
            <div id="status" class="status-message"></div>
        </div>

        <div class="main-content">
            <!-- Awards Panel - Danh s√°ch ph·∫ßn th∆∞·ªüng (b√™n tr√°i) -->
            <div class="awards-panel">
                <div class="awards-header">
                    <h2 data-i18n="awardsTitle">üèÜ Danh S√°ch Ph·∫ßn Th∆∞·ªüng</h2>
                    <button id="refreshAwardsBtn" class="btn btn-small" style="background: #17a2b8; color: white;" data-i18n="refreshAwardsBtn">üîÑ L√†m m·ªõi</button>
                </div>
                <div id="awardsList" class="awards-list">
                    <div style="text-align: center; color: #6c757d; padding: 40px;">
                        <p data-i18n="awardsInstructions">Nh·∫≠p DV Login v√† API Key, sau ƒë√≥ click "üîÑ L√†m m·ªõi" ƒë·ªÉ xem danh s√°ch ph·∫ßn th∆∞·ªüng</p>
                    </div>
                </div>
            </div>
            
            <!-- Participants Panel - Danh s√°ch ng∆∞·ªùi tham gia (·ªü gi·ªØa) -->
            <div class="participants-panel">
                <div class="participants-header">
                    <h3><span data-i18n="participantsTitle">Danh s√°ch tham gia</span> (<span id="participantCount">0</span>)</h3>
                    <div class="participants-actions">
                        <button id="rollBtn" class="btn btn-small btn-roll" data-i18n="rollBtn">üé≤ Roll</button>
                        <button id="exportBtn" class="btn btn-small btn-export" data-i18n="exportBtn">Xu·∫•t danh s√°ch</button>
                        <button id="clearParticipantsBtn" class="btn btn-small btn-danger" data-i18n="clearBtn">X√≥a danh s√°ch</button>
                    </div>
                </div>
                <div id="participantsList" class="participants-list"></div>
            </div>

            <!-- Chat Sidebar - B√™n ph·∫£i -->
            <div class="chat-sidebar">
                <div class="chat-header">
                    <h2 id="channelName" data-i18n="chatTitle">Chat</h2>
                    <div class="chat-stats">
                        <span id="messageCount">0</span>
                        <button id="toggleChatBtn" class="btn btn-small btn-toggle" data-i18n="hideChatBtn">·∫®n</button>
                        <button id="clearBtn" class="btn btn-small" data-i18n="clearChatBtn">X√≥a</button>
                    </div>
                </div>
                <div id="chatContainer" class="chat-container-wrapper">
                    <div id="chatMessages" class="chat-messages"></div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <!-- C·ªôt 1: C√†i ƒë·∫∑t t·ª´ kh√≥a v√† bot -->
            <div class="info-column">
                <h3 class="column-title" data-i18n="keywordAndBotTitle">‚öôÔ∏è C√†i ƒë·∫∑t T·ª´ kh√≥a & Bot</h3>
                
                <div class="input-group">
                    <label for="keywordInputInfo" data-i18n="keywordLabel">T·ª´ kh√≥a giveaway:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="keywordInputInfo" 
                            data-i18n="keywordPlaceholder"
                            placeholder="Nh·∫≠p t·ª´ kh√≥a (v√≠ d·ª•: !join, giveaway)"
                            autocomplete="off"
                        >
                        <button id="setKeywordBtnInfo" class="btn btn-primary" data-i18n="setKeywordBtn">C√†i ƒë·∫∑t</button>
                        <button id="disableKeywordBtnInfo" class="btn btn-secondary" data-i18n="disableKeywordBtn">T·∫Øt</button>
                    </div>
                    <div id="keywordStatusInfo" class="keyword-status"></div>
                </div>
                
                <div class="input-group">
                    <label for="botUsernameInputInfo" data-i18n="botUsernameLabel">Bot Username (ƒë·ªÉ g·ª≠i th√¥ng b√°o):</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="botUsernameInputInfo" 
                            data-i18n="botUsernamePlaceholder"
                            placeholder="T√™n bot Twitch"
                            autocomplete="off"
                        >
                        <button id="setBotBtnInfo" class="btn btn-primary" data-i18n="saveBtn">L∆∞u</button>
                    </div>
                    <div id="botStatusInfo" class="bot-status"></div>
                </div>
                
                <div class="input-group">
                    <label for="botOAuthInputInfo" data-i18n="botOAuthLabel">Bot OAuth Token:</label>
                    <div class="input-wrapper">
                        <input 
                            type="password" 
                            id="botOAuthInputInfo" 
                            data-i18n="botOAuthPlaceholder"
                            placeholder="oauth:xxxxx (t·ª´ https://twitchtokengenerator.com)"
                            autocomplete="off"
                        >
                        <button id="setBotOAuthBtnInfo" class="btn btn-primary" data-i18n="saveBtn">L∆∞u</button>
                    </div>
                    <small style="color: #6c757d; font-size: 0.85em; margin-top: 5px; display: block;">
                        <span data-i18n="botOAuthLink">L·∫•y token t·∫°i:</span> <a href="https://twitchtokengenerator.com" target="_blank">twitchtokengenerator.com</a>
                    </small>
                </div>
                
                <div class="input-group">
                    <label for="botMessageInputInfo" data-i18n="botMessageLabel">Tin nh·∫Øn khi roll (ng∆∞·ªùi chi·∫øn th·∫Øng):</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="botMessageInputInfo" 
                            data-i18n="botMessagePlaceholder"
                            placeholder="üéâ {winner} ƒë√£ chi·∫øn th·∫Øng giveaway! B·∫°n c√≥ 30s ƒë·ªÉ comment v√†o giveaway ƒë·ªÉ nh·∫≠n qu√†!"
                            autocomplete="off"
                        >
                        <button id="setBotMessageBtnInfo" class="btn btn-primary" data-i18n="saveBtn">L∆∞u</button>
                    </div>
                    <small style="color: #6c757d; font-size: 0.85em; margin-top: 5px; display: block;" data-i18n="botMessageHint">
                        S·ª≠ d·ª•ng {winner} ƒë·ªÉ thay th·∫ø t√™n ng∆∞·ªùi chi·∫øn th·∫Øng
                    </small>
                </div>
                
                <div class="input-group">
                    <label for="botParticipantMessageInputInfo" data-i18n="botParticipantMessageLabel">Tin nh·∫Øn khi ƒëi·ªÉm danh:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="botParticipantMessageInputInfo" 
                            data-i18n="botParticipantMessagePlaceholder"
                            placeholder="@{username} ‚úÖ B·∫°n ƒë√£ ƒë∆∞·ª£c th√™m v√†o danh s√°ch ƒë·ªÉ roll qu√†! Ch√∫c may m·∫Øn! üéÅ"
                            autocomplete="off"
                        >
                        <button id="setBotParticipantMessageBtnInfo" class="btn btn-primary" data-i18n="saveBtn">L∆∞u</button>
                    </div>
                    <small style="color: #6c757d; font-size: 0.85em; margin-top: 5px; display: block;" data-i18n="botParticipantMessageHint">
                        S·ª≠ d·ª•ng {username} ƒë·ªÉ thay th·∫ø t√™n ng∆∞·ªùi ƒëi·ªÉm danh
                    </small>
                </div>
            </div>
            
            <!-- C·ªôt 2: C√†i ƒë·∫∑t DV v√† API Key -->
            <div class="info-column">
                <h3 class="column-title" data-i18n="gameAPITitle">üéÆ Game API Integration</h3>
                
                <div class="input-group">
                    <label for="gameDvInputInfo" data-i18n="gameDvLabel">DV Login:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="gameDvInputInfo" 
                            data-i18n="gameDvPlaceholder"
                            placeholder="DV login"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gameKeyInputInfo" data-i18n="gameKeyLabel">API Key:</label>
                    <div class="input-wrapper">
                        <input 
                            type="password" 
                            id="gameKeyInputInfo" 
                            data-i18n="gameKeyPlaceholder"
                            placeholder="API key"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="game-api-actions" style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 15px;">
                    <button id="getBalanceBtnInfo" class="btn btn-small" style="background: #17a2b8; color: white;" data-i18n="getBalanceBtn">üí∞ Get Balance</button>
                    <button id="getLastDonateBtnInfo" class="btn btn-small" style="background: #17a2b8; color: white;" data-i18n="getLastDonateBtn">üìù Last Donate</button>
                    <button id="getAwardsBtnInfo" class="btn btn-small" style="background: #17a2b8; color: white;" data-i18n="getAwardsBtn">üèÜ Get Awards</button>
                </div>
                
                <div id="gameApiResultInfo" class="game-api-result" style="margin-top: 15px; padding: 12px; background: #f8f9fa; border-radius: 6px; border: 1px solid #e9ecef; display: none; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
            </div>
            
            <!-- C·ªôt 3: G·ª≠i ph·∫ßn th∆∞·ªüng -->
            <div class="info-column">
                <h3 class="column-title" data-i18n="sendRewardLabel">üéÅ G·ª≠i Ph·∫ßn Th∆∞·ªüng</h3>
                
                <div class="input-group">
                    <label data-i18n="rewardTypeLabel">Lo·∫°i ph·∫ßn th∆∞·ªüng:</label>
                    <div class="input-wrapper">
                        <select id="gameRewardTypeInfo" style="padding: 8px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 4px; background: #2a2a3e; color: #e0e0e0; width: 100%;">
                            <option value="sendmcoins">MCoins</option>
                            <option value="sendmpoints">MPoints</option>
                            <option value="sendmegavip">MEGAVIP</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gameRewardValueInfo" data-i18n="rewardValueLabel">S·ªë l∆∞·ª£ng:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="gameRewardValueInfo" 
                            data-i18n="rewardValueLabel"
                            placeholder="S·ªë l∆∞·ª£ng"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gameRewardPlayerInfo" data-i18n="rewardPlayerLabel">T√™n nh√¢n v·∫≠t:</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="gameRewardPlayerInfo" 
                            data-i18n="rewardPlayerLabel"
                            placeholder="T√™n nh√¢n v·∫≠t"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gameRewardDescInfo" data-i18n="rewardDescLabel">M√¥ t·∫£ (t·ªëi ƒëa 15 k√Ω t·ª±):</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="gameRewardDescInfo" 
                            data-i18n="rewardDescLabel"
                            placeholder="M√¥ t·∫£ (t·ªëi ƒëa 15 k√Ω t·ª±)"
                            maxlength="15"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="input-group">
                    <button id="sendRewardBtnInfo" class="btn btn-primary" style="width: 100%;" data-i18n="sendRewardBtn">G·ª≠i ph·∫ßn th∆∞·ªüng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Winner Popup -->
    <div id="winnerPopup" class="winner-popup">
        <div class="winner-popup-content">
            <div class="winner-header">
                <h2 data-i18n="winnerTitle">üéâ Ng∆∞·ªùi Chi·∫øn Th·∫Øng üéâ</h2>
                <button id="closeWinnerPopupBtn" class="btn-close">&times;</button>
            </div>
            <div class="winner-name">
                <span id="winnerName">-</span>
            </div>
            <div class="countdown-section">
                <p data-i18n="waitingComment">ƒêang ch·ªù comment trong:</p>
                <div id="countdown" class="countdown">30</div>
                <p class="countdown-label" data-i18n="seconds">gi√¢y</p>
            </div>
            <div class="winner-messages-section">
                <h3 data-i18n="winnerMessagesTitle">Tin nh·∫Øn t·ª´ ng∆∞·ªùi chi·∫øn th·∫Øng:</h3>
                <div id="winnerMessages" class="winner-messages"></div>
            </div>
            <div class="winner-actions">
                <button id="rollAgainBtn" class="btn btn-primary btn-roll-again" data-i18n="rollAgainBtn">üé≤ Roll Ti·∫øp</button>
                <button id="closeWinnerBtn" class="btn btn-secondary" data-i18n="closeBtn">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="i18n.js"></script>
    <script src="app.js"></script>
</body>
</html>

